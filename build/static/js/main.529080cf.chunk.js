(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(14),a=t.n(c),r=t(3),u=t(1),o=t(0),i=function(e){return Object(o.jsxs)("div",{children:["filter shown with: ",Object(o.jsx)("input",{value:e.filterName,onChange:e.handleFilterNameChange})]})},s=function(e){return Object(o.jsxs)("form",{onSubmit:e.handleNameSubmit,children:[Object(o.jsxs)("div",{children:["name: ",Object(o.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(o.jsxs)("div",{children:["number: ",Object(o.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})},l=function(e){return Object(o.jsxs)("p",{children:[e.name," ",e.number,Object(o.jsx)("button",{onClick:e.onDelete,children:"Delete"})]})},b=function(e){return""===e.filterName?e.persons.map((function(n){return Object(o.jsx)(l,{onDelete:function(){return e.onDelete(n.id,n.name)},name:n.name,number:n.number},n.name)})):e.filterPersons.map((function(n){return Object(o.jsx)(l,{onDelete:function(){return e.onDelete(n.id,n.name)},name:n.name,number:n.number},n.name)}))},d=function(e){var n=e.message,t=e.styleClass;return null===n?null:Object(o.jsx)("div",{className:t,children:n})},j=t(4),m=t.n(j),f="/api/persons",h=function(){return m.a.get(f).then((function(e){return e.data}))},O=function(e){return m.a.post(f,e).then((function(e){return e.data}))},p=function(e,n){return m.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},x=function(e){return m.a.delete("".concat(f,"/").concat(e))},v=function(){var e=Object(u.useState)([]),n=Object(r.a)(e,2),t=n[0],c=n[1],a=Object(u.useState)(""),l=Object(r.a)(a,2),j=l[0],m=l[1],f=Object(u.useState)(""),v=Object(r.a)(f,2),N=v[0],g=v[1],w=Object(u.useState)(""),C=Object(r.a)(w,2),D=C[0],S=C[1],k=Object(u.useState)(t),y=Object(r.a)(k,2),E=y[0],F=y[1],P=Object(u.useState)(null),A=Object(r.a)(P,2),I=A[0],J=A[1],L=Object(u.useState)("success"),B=Object(r.a)(L,2),T=B[0],U=B[1];Object(u.useEffect)((function(){h().then((function(e){c(e)}))}),[]),Object(u.useEffect)((function(){m(""),g("")}),[t]);var q=function(e,n,t){U(n),J(e),setTimeout((function(){J(null)}),t)};return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(d,{message:I,styleClass:T}),Object(o.jsx)(i,{filterName:D,handleFilterNameChange:function(e){S(e.target.value),F(t.filter((function(n){return n.name.toLowerCase()===e.target.value.toLowerCase()})))}}),Object(o.jsx)("h2",{children:"Add a new number"}),Object(o.jsx)(s,{newName:j,handleNameChange:function(e){m(e.target.value)},newNumber:N,handleNumberChange:function(e){g(e.target.value)},handleNameSubmit:function(e){e.preventDefault();var n=t.find((function(e){return e.name===j})),a={name:j,number:N};n?window.confirm("".concat(j," is already added to the phonebook, replace old number with a new one?"))&&p(n.id,a).then((function(e){c(t.map((function(t){return t.id!==n.id?t:e}))),q("Updated ".concat(e.name),"success",5e3)})).catch((function(e){q("Information of ".concat(n.name," has already been removed from server"),"error",5e3),h().then((function(e){c(e)}))})):O(a).then((function(e){c(t.concat(e)),q("Added ".concat(e.name),"success",5e3)}))}}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)(b,{onDelete:function(e,n){window.confirm("Delete ".concat(n," ?"))&&x(e).then((function(){c(t.filter((function(n){return n.id!==e}))),q("Deleted ".concat(n),"success",5e3)})).catch((function(e){q("Failed not delete ".concat(n),"error",5e3)}))},filterName:D,persons:t,filterPersons:E})]})};t(38);a.a.render(Object(o.jsx)(v,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.529080cf.chunk.js.map